databases:
  - name: ssmup-postgres
    plan: free

services:
  - type: web
    name: ssmup-api
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    autoDeploy: true
    healthCheckPath: /actuator/health

    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod

      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: ssmup-postgres
          property: connectionString

      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: ssmup-postgres
          property: user

      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: ssmup-postgres
          property: password

      - key: GOOGLE_CLIENT_ID
        value: 690914641866-so78ac62ua11t47ibur3a0tp9pnjjr3s.apps.googleusercontent.com

      - key: JWT_SECRET
        generateValue: true